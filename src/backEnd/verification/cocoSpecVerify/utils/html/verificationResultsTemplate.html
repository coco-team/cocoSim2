<!-- 
 This file is part of CoCoSim.
 Copyright (C) 2018  The university of Iowa
 Author: Mudathir Mahgoub 
-->

<html lang="en">
<head>
    <script src="jquery.min.js"></script>
</head>

<body>
<div id="verificationResults" class="table-responsive">

</div>

    <script>
        $(document).ready(function () {

            var verificationResults = [(verificationResults)];

            var modelPath = '[(modelPath)]';

            // make sure analysisResults is an array
            if (! Array.isArray(verificationResults.analysisResults)){
                verificationResults.analysisResults = [verificationResults.analysisResults];
            }

            verificationResults.analysisResults.forEach(function (result, index) {
                console.log(result);
                $('#verificationResults').append('<br/>');
                $('#verificationResults').append('<h2>' + result.top + '</h2>');
                $('#verificationResults').append('<h3>' + result.abstract + '</h3>');

                // make sure properties is an array
                if (! Array.isArray(result.properties)){
                    result.properties = [result.properties];
                }

                result.properties.forEach(function(property, propertyIndex){

                    if(property.answer === "CEX"){

                        var matlabCommands = 'open(\'' + modelPath + '\');' +
                            'displayCexHtmlTables(' + (index+1) + ','+ (propertyIndex +1) + ');';

                        $('#verificationResults')
                            .append(
                                '<div>' +
                                    '<a href="matlab:'+matlabCommands+'">' +
                                        property.originPath + "  |  " + property.answer+
                                    '</a>' +
                                '</div>');
                    }
                    else {
                        $('#verificationResults').append('<div>' + property.originPath + "  |  " + property.answer+  '</div>');
                    }

                });
            });
        });
    </script>
</body>
</html>